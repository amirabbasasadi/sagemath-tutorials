# کار با توابع
در این بخش سعی شده است مفاهیم پایه مربوط به کار با توابع در Sage توضیح داده شود.این بخش را با تعریف توابع شروع می کنیم و در ادامه به توابع نمادین و توابع چند ضابطه ای می پردازیم.

## تعریف توابع در Sage
برای تعریف یک تابع در Sage چند روش وجود دارد.ساده ترین روش تعریف یک تابع به صورت زیر است که شباهت زیادی به نوشتار آن در ریاضیات دارد.
```python
f(x) = x^2
```
دقت کنید نیازی نیست متغیر های ورودی تابع را به برنامه معرفی کنید.برای تعریف توابع چند متغیره می توان نوشت:
```python
f(x,y,z) = x^2 + y^2 + z^2 - 1
```
می توان برای تعریف توابع از شیوه تعریف توابع در زبان Python استفاده کرد و برای مثال تابع بالا را اینگونه تعریف کرد:

```python
def f(x,y,z):
	return x^2 + y^2 + z^2 - 1
```
هر طور که تابع را تعریف کنید، می توان مقدار آن را به ازای چند مقدار اینگونه بدست آورد:
```python
f(x, y) = x^2 + y^2 - sin(x*y)
f(0, 0)
# output: 0
```
## تعریف توابع چند ضابطه ای
در Sage برای تعریف یک تابع چند ضایطه ای از تابع `piecewise` استفاده می کنیم. نکته بسیار قابل توجه این است که برای تعریف این توابع حتی الامکان نباید از شیوه تعریف توابع python استفاده کرد(تعریف بدین شکل مشکلاتی از قبلی عدم رسم صحیح تابع به دنبال خواهد داشت.).پس بهترین شیوه برای تعریف این توابع استفاده از `piecewise` است که به صورت زیر انجام می شود:
```python
f(x) = piecewise([((1, 5),x^3), ([5, 10], x+4)])
f(5)
# output: 9
f(1)
# output: ValueError: point 1 is not in the domain
```
در کد بالا برای تعریف بازه ها و مقادیر تابع در آن ها به صورت لیستی از زوج های مرتب به تابع `piecewise` داده شده است.در کد بالا به شیوه مشخص کردن بازه باز و بسته دقت کنید.
## تعریف تابع به صورت نمادین
در Sage می توان یک تابع را به صورت نمادین معرفی کرد.یکی از کاربرد های این شیوه معرفی تابع، حل معادلات دیفرانسیل است.

```python
f = function('f')(x)
```
کد بالا `f` را به عنوان تابعی از `x` معرفی می کند. در بخشی که مفاهیم حسابان در Sage را توضیح می دهیم این شیوه تعریف واضح تر خواهد شد اما در اینجا توجه به مثال زیر برای درک این تعریف کفایت می کند.در کد زیر متد `derivative` مشتق یک عبارت را محاسبه می کند و ورودی آن متغیری است که نسبت به آن مشتق می گیریم.این تابع به طور مفصل در بخش حسابان توضیح داده می شود.در این محاسبه واضح است که Sage تابع `f` را تابعی از `x` در نظر گرفته است.به تمایزی که برنامه بین `f` و `y` قائل می شود دقت کنید.
```python
y = var('y')
f = function('f')(x)
(x*y).derivative(x)
# output: y
(x*f).derivative(x)
# output: x*D[0](f)(x) + f(x)
```
در کد بالا منظور از `D[0](f)(x)` مشتق اول `f` نسبت به `x` است.
